@page "/default"
<PageTitle>Default</PageTitle>
@using TemplateApp.Models
@using System.Globalization
@using TemplateApp.Services
@inject IDefaultService DefaultService 


<AuthorizeView>
    <Authorized>
        <MudTable Items="data" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@_loading" LoadingProgressColor="Color.Primary">
            <HeaderContent>
                <MudTh>Name</MudTh>
                <MudTh>Date</MudTh>
            </HeaderContent>
            <RowTemplate Context="defaultEntityDto">
                <MudTd DataLabel="Name">defaultEntityDto.Name</MudTd>
                <MudTd DataLabel="Date">@defaultEntityDto.Date.ToString(CultureInfo.InvariantCulture)</MudTd>
            </RowTemplate>
        </MudTable>
        <br/>
    </Authorized>
    <NotAuthorized>
        <MudText>You are not allowed</MudText>
    </NotAuthorized>
</AuthorizeView>

@code {
    private List<DefaultEntityDTO> data;
    bool _loading = true;

    protected override async Task OnInitializedAsync()
    {
        data = await DefaultService.GetDataAsync();
        _loading = false;
    }
}
